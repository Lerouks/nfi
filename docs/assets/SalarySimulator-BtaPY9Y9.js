import{r as v,j as e}from"./react-vendor-DTmObZUI.js";import{a3 as O,I as G,T as U,aa as X,ab as I,d as B,ac as K}from"./icons-CXA2BseQ.js";import{R as D,P as V,d as Y,e as q,T as k,c as R,B as H,C as J,X as Q,Y as W,b as F}from"./charts-CxNNR8U_.js";const M=[{min:0,max:25e3,taux:0},{min:25e3,max:5e4,taux:.01},{min:5e4,max:1e5,taux:.15},{min:1e5,max:15e4,taux:.19},{min:15e4,max:3e5,taux:.25},{min:3e5,max:1/0,taux:.35}],Z=.0525,z=8e5,ee=.154,ae=.02,te=.1,P=.05,se=.3,le=[{field:"electricite",label:"Électricité",amount:"50 000"},{field:"eau",label:"Eau",amount:"15 000"},{field:"vehicule",label:"Véhicule de fonction",amount:"20 000"},{field:"telephone",label:"Téléphone",amount:"20 000"},{field:"nourriture",label:"Nourriture",amount:"25 000"}],re={logementPieces:0,electricite:!1,eau:!1,vehicule:!1,telephone:!1,nourriture:!1},ne={marie:!1,nbEnfants:0},_={id:"1",label:"Scénario 1",brut:"150000",avantages:{...re},famille:{...ne}};function ie(s){let r=0;for(const i of M){if(s<=i.min)break;r+=(Math.min(s,i.max)-i.min)*i.taux}return Math.max(0,r)}function oe(s){const r=Math.max(0,parseFloat(s.brut.replace(/\s/g,""))||0),i=s.avantages.logementPieces>0?Math.min(s.avantages.logementPieces*2e4,r/3):0,x=s.avantages.electricite?5e4:0,b=s.avantages.eau?15e3:0,S=s.avantages.vehicule?2e4:0,h=s.avantages.telephone?2e4:0,C=s.avantages.nourriture?25e3:0,A=i+x+b+S+h+C,m=r+A,p=Math.min(m,z)*Z,j=Math.max(0,m-p),g=ie(j),N=s.famille.marie?te:0,t=Math.min(s.famille.nbEnfants*P,P*3),y=Math.min(N+t,se),w=Math.round(g*y),f=Math.max(0,g-w),E=Math.max(0,m-p-f),T=m*ee,a=m*ae,l=m+T+a;return{bruBase:r,totalAv:A,avDetails:{avLog:i,avElec:x,avEau:b,avVeh:S,avTel:h,avNour:C},brutTotal:m,cnss:p,baseITS:j,itsBrut:g,redTotale:y,redMontant:w,itsNet:f,netMensuel:E,patronale:T,apprentissage:a,coutEmployeur:l,tauxEffectif:m>0?(p+f)/m*100:0,plafonneeCNSS:m>z}}const n=s=>new Intl.NumberFormat("fr-FR",{maximumFractionDigits:0}).format(Math.round(s))+" FCFA",$=["#00A651","#E53E3E","#0D1B35"],ce=({active:s,payload:r})=>!s||!(r!=null&&r.length)?null:e.jsxs("div",{className:"bg-white border rounded-xl shadow-lg px-4 py-3 text-sm",style:{borderColor:"rgba(0,0,0,0.1)"},children:[e.jsx("p",{className:"text-gray-600",children:r[0].name}),e.jsx("p",{className:"text-[#0D1B35] font-semibold",children:n(r[0].value)})]});function o({label:s,value:r,color:i="text-[#0D1B35]",bold:x=!1,sub:b}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 py-1.5",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:`text-sm text-gray-600 ${x?"font-semibold":""}`,children:s}),b&&e.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:b})]}),e.jsx("span",{className:`text-sm shrink-0 ${i} ${x?"font-bold":"font-medium"}`,children:r})]})}function L({value:s,min:r=0,max:i=10,onChange:x}){return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>x(Math.max(r,s-1)),className:"w-7 h-7 rounded-lg border flex items-center justify-center text-gray-600 hover:bg-gray-100 transition-colors text-base",style:{borderColor:"rgba(0,0,0,0.12)"},children:"−"}),e.jsx("span",{className:"text-sm font-semibold text-[#0D1B35] w-6 text-center",children:s}),e.jsx("button",{onClick:()=>x(Math.min(i,s+1)),className:"w-7 h-7 rounded-lg border flex items-center justify-center text-gray-600 hover:bg-gray-100 transition-colors text-base",style:{borderColor:"rgba(0,0,0,0.12)"},children:"+"})]})}function ue(){const[s,r]=v.useState([_]),[i,x]=v.useState("1"),[b,S]=v.useState(!1),[h,C]=v.useState(!1),A=()=>{if(s.length>=3)return;const a=Date.now().toString(),l=s.length+1;r(c=>[...c,{..._,id:a,label:`Scénario ${l}`,brut:String(15e4+l*5e4)}]),x(a)},m=a=>{const l=s.filter(c=>c.id!==a);r(l),x(l[0].id)},p=(a,l,c)=>r(u=>u.map(d=>d.id===a?{...d,[l]:c}:d)),j=(a,l,c)=>r(u=>u.map(d=>d.id===a?{...d,avantages:{...d.avantages,[l]:c}}:d)),g=(a,l,c)=>r(u=>u.map(d=>d.id===a?{...d,famille:{...d.famille,[l]:c}}:d)),N=v.useMemo(()=>s.map(a=>({...a,calc:oe(a)})),[s]),t=N.find(a=>a.id===i)??N[0],y=[{name:"Salaire net",value:Math.round(t.calc.netMensuel)},{name:"ITS net",value:Math.round(t.calc.itsNet)},{name:"CNSS salarié",value:Math.round(t.calc.cnss)}].filter(a=>a.value>0),w=N.map(a=>({name:a.label,Net:Math.round(a.calc.netMensuel),ITS:Math.round(a.calc.itsNet),CNSS:Math.round(a.calc.cnss)})),f=t.calc.totalAv>0,E=t.calc.redMontant>0,T=[t.famille.marie?"Marié(e) −10%":"",t.famille.nbEnfants>0?`${t.famille.nbEnfants} enfant(s) −${Math.min(t.famille.nbEnfants*5,15)}%`:""].filter(Boolean).join(" · ");return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#00A651]/10 flex items-center justify-center",children:e.jsx(O,{size:20,className:"text-[#00A651]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[#0D1B35]",style:{fontSize:"1.4rem"},children:"Simulateur de Salaire Net — Niger"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"ITS + CNSS · Barème CGI 2025"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 bg-amber-50 border border-amber-200 rounded-xl px-4 py-3",children:[e.jsx(G,{size:15,className:"text-amber-600 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-xs text-amber-800",children:"Barème ITS mensuel CGI 2025 — CNSS salarié 5,25 % (plafond 800 000 FCFA). Les réductions familiales sont estimées (Marié : −10 %, par enfant : −5 %, plafond 30 %). Résultats indicatifs — consultez un fiscaliste pour toute décision."})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.map(a=>e.jsxs("button",{onClick:()=>x(a.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm border transition-all ${i===a.id?"bg-[#00A651] text-white border-[#00A651]":"bg-white text-gray-600 border-gray-200 hover:border-[#00A651] hover:text-[#00A651]"}`,children:[a.label,s.length>1&&i===a.id&&e.jsx("span",{onClick:l=>{l.stopPropagation(),m(a.id)},className:"ml-1 text-white/80 hover:text-white cursor-pointer",children:e.jsx(U,{size:11})})]},a.id)),s.length<3&&e.jsxs("button",{onClick:A,className:"flex items-center gap-1.5 px-3 py-2 rounded-full text-sm border border-dashed border-gray-300 text-gray-500 hover:border-[#00A651] hover:text-[#00A651] transition-all",children:[e.jsx(X,{size:14})," Comparer"]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-5 border space-y-4",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("p",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider",children:"Paramètres"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Nom du scénario"}),e.jsx("input",{type:"text",value:t.label,onChange:a=>p(t.id,"label",a.target.value),className:"w-full px-3 py-2.5 text-sm border rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-[#00A651]/30 focus:border-[#00A651]",style:{borderColor:"rgba(0,0,0,0.12)"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Salaire de base brut mensuel"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:t.brut,onChange:a=>p(t.id,"brut",a.target.value),className:"w-full px-3 py-2.5 text-sm border rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-[#00A651]/30 focus:border-[#00A651] pr-16",style:{borderColor:"rgba(0,0,0,0.12)"},min:0,step:5e3}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"FCFA"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Situation familiale"}),e.jsx("div",{className:"flex gap-2 mb-3",children:["Célibataire","Marié(e)"].map((a,l)=>e.jsx("button",{onClick:()=>g(t.id,"marie",l===1),className:`flex-1 py-2 text-sm rounded-xl border transition-all ${t.famille.marie===(l===1)?"bg-[#0D1B35] text-white border-[#0D1B35]":"bg-white text-gray-600 border-gray-200 hover:border-gray-400"}`,children:a},a))}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border px-4 py-2.5",style:{borderColor:"rgba(0,0,0,0.10)"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Enfants à charge"}),t.famille.nbEnfants>0&&e.jsxs("p",{className:"text-[10px] text-[#00A651]",children:["Réduction −",Math.min(t.famille.nbEnfants*5,15)," %"]})]}),e.jsx(L,{value:t.famille.nbEnfants,min:0,max:5,onChange:a=>g(t.id,"nbEnfants",a)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl border overflow-hidden",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsxs("button",{onClick:()=>S(!b),className:"w-full flex items-center justify-between px-5 py-3.5 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Avantages en nature"}),f&&e.jsxs("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full bg-[#00A651]/10 text-[#00A651]",children:["+",n(t.calc.totalAv)]})]}),b?e.jsx(I,{size:16,className:"text-gray-400"}):e.jsx(B,{size:16,className:"text-gray-400"})]}),b&&e.jsxs("div",{className:"px-5 pb-5 space-y-2.5 border-t",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("p",{className:"text-xs text-gray-400 pt-3",children:"Forfaits CGI 2025 — intégrés au brut imposable"}),e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl border px-4 py-3",style:{borderColor:"rgba(0,0,0,0.10)"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-700",children:"Logement de fonction"}),e.jsx("p",{className:"text-[10px] text-gray-400",children:"20 000 FCFA/pièce · max ⅓ salaire de base"}),t.avantages.logementPieces>0&&e.jsxs("p",{className:"text-[10px] text-[#00A651] font-medium mt-0.5",children:["= ",n(t.calc.avDetails.avLog)]})]}),e.jsx(L,{value:t.avantages.logementPieces,min:0,max:8,onChange:a=>j(t.id,"logementPieces",a)})]}),le.map(({field:a,label:l,amount:c})=>e.jsxs("label",{className:"flex items-center justify-between bg-white rounded-xl border px-4 py-2.5 cursor-pointer hover:bg-gray-50 transition-colors",style:{borderColor:"rgba(0,0,0,0.10)"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:t.avantages[a],onChange:u=>j(t.id,a,u.target.checked),className:"w-4 h-4 accent-[#00A651] cursor-pointer"}),e.jsx("span",{className:"text-xs text-gray-700",children:l})]}),e.jsxs("span",{className:"text-xs text-gray-400",children:[c," FCFA"]})]},a))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[{label:"Salaire net",value:n(t.calc.netMensuel),color:"#00A651",hl:!0},{label:"ITS net",value:n(t.calc.itsNet),color:"#E53E3E",hl:!1},{label:"CNSS (5,25%)",value:n(t.calc.cnss),color:"#0D1B35",hl:!1}].map(({label:a,value:l,color:c,hl:u})=>e.jsxs("div",{className:"rounded-2xl p-3.5 border",style:{background:u?"rgba(0,166,81,0.06)":"white",borderColor:u?"rgba(0,166,81,0.25)":"rgba(0,0,0,0.06)"},children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:a}),e.jsx("p",{className:"font-bold text-sm",style:{color:c},children:l})]},a))}),e.jsxs("div",{className:"bg-white rounded-2xl border divide-y",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsxs("div",{className:"px-5 py-4 space-y-0",children:[e.jsx("p",{className:"text-[10px] font-semibold text-gray-400 uppercase tracking-wider mb-2",children:"Détail du calcul"}),e.jsx(o,{label:"Salaire de base",value:n(t.calc.bruBase)}),f&&e.jsx(o,{label:"+ Avantages en nature",value:n(t.calc.totalAv),color:"text-[#00A651]",sub:"logement, électricité, véhicule…"}),e.jsx("div",{className:"pt-1 border-t mt-1",style:{borderColor:"rgba(0,0,0,0.06)"},children:e.jsx(o,{label:"Brut total imposable",value:n(t.calc.brutTotal),bold:!0})})]}),e.jsxs("div",{className:"px-5 py-4 space-y-0",children:[e.jsx(o,{label:`− CNSS salarié 5,25 %${t.calc.plafonneeCNSS?" (plafonné)":""}`,value:n(t.calc.cnss),color:"text-red-500",sub:t.calc.plafonneeCNSS?"Plafond 800 000 FCFA appliqué":void 0}),e.jsx(o,{label:"= Base ITS",value:n(t.calc.baseITS),sub:"Brut − CNSS"}),e.jsx(o,{label:"ITS brut (barème)",value:n(t.calc.itsBrut),color:"text-red-500"}),E&&e.jsx(o,{label:`+ Réduction familiale (${(t.calc.redTotale*100).toFixed(0)} %)`,value:n(t.calc.redMontant),color:"text-[#00A651]",sub:T}),e.jsx(o,{label:"− ITS net",value:n(t.calc.itsNet),color:"text-red-500",bold:!0})]}),e.jsxs("div",{className:"px-5 py-4 space-y-0",children:[e.jsx(o,{label:"Salaire net mensuel",value:n(t.calc.netMensuel),color:"text-[#00A651]",bold:!0}),e.jsx(o,{label:"Taux de prélèvement effectif",value:`${t.calc.tauxEffectif.toFixed(1)} %`,color:"text-orange-600"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border p-5",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Répartition mensuelle du salaire brut"}),e.jsx(D,{width:"100%",height:185,children:e.jsxs(V,{children:[e.jsx(Y,{data:y,cx:"50%",cy:"50%",innerRadius:48,outerRadius:78,paddingAngle:3,dataKey:"value",children:y.map((a,l)=>e.jsx(q,{fill:$[l%$.length]},l))}),e.jsx(k,{content:e.jsx(ce,{})}),e.jsx(R,{iconType:"circle",iconSize:8,formatter:a=>e.jsx("span",{style:{fontSize:11,color:"#374151"},children:a})})]})})]})]})]}),s.length>1&&e.jsxs("div",{className:"bg-white rounded-2xl p-5 border",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Comparaison des scénarios (mensuel, FCFA)"}),e.jsx(D,{width:"100%",height:220,children:e.jsxs(H,{data:w,barSize:22,children:[e.jsx(J,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(Q,{dataKey:"name",tick:{fontSize:11,fill:"#6B7280"}}),e.jsx(W,{tick:{fontSize:10,fill:"#6B7280"},tickFormatter:a=>(a/1e3).toFixed(0)+"k"}),e.jsx(k,{formatter:(a,l)=>[n(a),l],contentStyle:{borderRadius:12,fontSize:12}}),e.jsx(R,{iconType:"circle",iconSize:8,wrapperStyle:{fontSize:11}}),e.jsx(F,{dataKey:"Net",name:"Salaire net",fill:"#00A651",radius:[4,4,0,0]}),e.jsx(F,{dataKey:"ITS",name:"ITS net",fill:"#E53E3E",radius:[4,4,0,0]}),e.jsx(F,{dataKey:"CNSS",name:"CNSS salarié",fill:"#0D1B35",radius:[4,4,0,0]})]})})]}),e.jsxs("div",{className:"rounded-2xl border overflow-hidden",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsxs("button",{onClick:()=>C(!h),className:"w-full flex items-center justify-between px-5 py-4 transition-colors",style:{background:"#0D1B35"},children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx(K,{size:14,className:"text-white"}),e.jsx("span",{className:"text-sm font-medium text-white",children:"Coût total pour l'employeur"}),!h&&e.jsxs("span",{className:"text-xs text-gray-400",children:["= ",n(t.calc.coutEmployeur)]})]}),h?e.jsx(I,{size:15,className:"text-gray-400"}):e.jsx(B,{size:15,className:"text-gray-400"})]}),h&&e.jsxs("div",{className:"bg-white px-5 py-4 space-y-0",children:[e.jsx(o,{label:"Salaire brut total",value:n(t.calc.brutTotal)}),e.jsx(o,{label:"+ CNSS patronale (15,4 %)",value:n(t.calc.patronale),color:"text-red-500"}),e.jsx(o,{label:"+ Taxe d'apprentissage (2 %)",value:n(t.calc.apprentissage),color:"text-red-500"}),e.jsx("div",{className:"border-t pt-3 mt-2",style:{borderColor:"rgba(0,0,0,0.07)"},children:e.jsx(o,{label:"Coût mensuel total employeur",value:n(t.calc.coutEmployeur),color:"text-[#0D1B35]",bold:!0})})]})]}),e.jsxs("details",{className:"bg-gray-50 rounded-2xl border",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("summary",{className:"px-5 py-3.5 cursor-pointer text-sm text-gray-600 select-none",children:"Barème ITS Niger — CGI 2025 (tranches mensuelles)"}),e.jsxs("div",{className:"px-5 pb-4",children:[e.jsxs("table",{className:"w-full text-xs text-gray-600",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx("th",{className:"text-left py-2",children:"Tranche mensuelle"}),e.jsx("th",{className:"text-right py-2",children:"Taux"})]})}),e.jsx("tbody",{children:M.map((a,l)=>e.jsxs("tr",{className:"border-b last:border-0",style:{borderColor:"rgba(0,0,0,0.05)"},children:[e.jsx("td",{className:"py-2",children:l===M.length-1?`Au-delà de ${a.min.toLocaleString("fr-FR")} FCFA`:`${a.min.toLocaleString("fr-FR")} – ${a.max.toLocaleString("fr-FR")} FCFA`}),e.jsxs("td",{className:"text-right py-2 font-semibold text-[#0D1B35]",children:[(a.taux*100).toFixed(0)," %"]})]},l))})]}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-3",children:"CNSS salarié : 5,25 % (plafond 800 000 FCFA/mois) · CNSS patronale : 15,4 % · Taxe apprentissage : 2 %"})]})]})]})}export{ue as default};
