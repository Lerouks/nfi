import{r as d,j as e}from"./react-vendor-DTmObZUI.js";import{a1 as z,O as I,I as $}from"./icons-CXA2BseQ.js";import{R,A as E,C as T,X as L,Y as O,T as K,c as G,f as k}from"./charts-CxNNR8U_.js";const h=a=>new Intl.NumberFormat("fr-FR",{maximumFractionDigits:0}).format(a);function V(a,c,r){if(a<=0||r<=0)return 0;if(c===0)return a/r;const o=c/100/12,l=Math.pow(1+o,r);return!isFinite(l)||l===1?0:a*o*l/(l-1)}function w({label:a,value:c,onChange:r,min:o=0,max:l,step:m=1,suffix:g}){const[u,b]=d.useState(String(c));return d.useEffect(()=>{b(String(c))},[c]),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1.5",children:a}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:u,min:o,max:l,step:m,onChange:f=>{b(f.target.value);const v=parseFloat(f.target.value);isNaN(v)||r(v)},onBlur:()=>{const f=parseFloat(u);(isNaN(f)||u.trim()==="")&&(b(String(o)),r(o))},className:"w-full px-3 py-2.5 text-sm border rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-[#00A651]/30 focus:border-[#00A651] pr-14",style:{borderColor:"rgba(0,0,0,0.12)"}}),g&&e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:g})]})]})}function M({label:a,value:c,sub:r,highlight:o=!1,warn:l=!1}){const m=l?"#E53E3E":o?"#00A651":"#0D1B35";return e.jsxs("div",{className:"rounded-2xl p-4 border",style:{background:o?"rgba(0,166,81,0.06)":l?"rgba(229,62,62,0.05)":"white",borderColor:o?"rgba(0,166,81,0.25)":l?"rgba(229,62,62,0.2)":"rgba(0,0,0,0.06)"},children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:a}),e.jsx("p",{className:"font-bold text-sm",style:{color:m},children:c}),r&&e.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5",children:r})]})}function q(){const[a,c]=d.useState(5e6),[r,o]=d.useState(7),[l,m]=d.useState(5),[g,u]=d.useState("5"),[b,f]=d.useState("années"),v=t=>{if(t!==b){if(t==="années"){const s=Math.max(1,Math.round(l/12));m(s),u(String(s))}else{const s=l*12;m(s),u(String(s))}f(t)}},i=b==="années"?l*12:l,p=d.useMemo(()=>{const t=V(a,r,i);return isFinite(t)&&!isNaN(t)?t:0},[a,r,i]),j=i>0?p*i:0,S=Math.max(0,j-a),F=a>0&&j>0?S/a*100:0,D=d.useMemo(()=>{const t=r/100/12;let s=a;const x=[];if(i<=12)for(let n=1;n<=i;n++){const y=s*t,N=p-y;s=Math.max(0,s-N),x.push({label:`M${n}`,Capital:Math.round(a-s),Solde:Math.round(s)})}else for(let n=1;n<=i;n++){const y=s*t,N=p-y;s=Math.max(0,s-N),(n%12===0||n===i)&&x.push({label:`An ${Math.ceil(n/12)}`,Capital:Math.round(a-s),Solde:Math.round(s)})}return x},[a,r,i,p]),C=d.useMemo(()=>{const t=r/100/12;let s=a;const x=[];for(let n=1;n<=i;n++){const y=s*t,N=p-y;s=Math.max(0,s-N),x.push({month:n,monthly:Math.round(p),interest:Math.round(y),principal:Math.round(N),balance:Math.round(s)})}return x},[a,r,i,p]),B=d.useMemo(()=>C.length<=9?C:[...C.slice(0,3),null,...C.slice(-3)],[C]),A=F>50;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#0D1B35]/10 flex items-center justify-center",children:e.jsx(z,{size:20,className:"text-[#0D1B35]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[#0D1B35]",style:{fontSize:"1.4rem"},children:"Simulateur d'Emprunt"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Calculez vos mensualités et le coût total de votre crédit"})]})]}),A?e.jsxs("div",{className:"flex items-start gap-2 bg-red-50 border border-red-200 rounded-xl px-4 py-3",children:[e.jsx(I,{size:15,className:"text-red-500 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-xs text-red-700",children:["Attention : le coût total des intérêts représente ",e.jsxs("strong",{children:[F.toFixed(0),"%"]})," du capital emprunté. Vérifiez les conditions du prêt."]})]}):e.jsxs("div",{className:"flex items-start gap-2 bg-blue-50 border border-blue-200 rounded-xl px-4 py-3",children:[e.jsx($,{size:15,className:"text-blue-500 mt-0.5 shrink-0"}),e.jsxs("p",{className:"text-xs text-blue-800",children:["Ce simulateur utilise le calcul des ",e.jsx("strong",{children:"mensualités constantes"})," (méthode française), standard dans la plupart des banques africaines."]})]}),e.jsxs("div",{className:"grid lg:grid-cols-5 gap-5",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4 bg-gray-50 rounded-2xl p-5 border",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx(w,{label:"Montant de l'emprunt (FCFA)",value:a,onChange:t=>c(Math.max(0,t)),min:0,step:5e5,suffix:"FCFA"}),e.jsx(w,{label:"Taux d'intérêt annuel (%)",value:r,onChange:t=>o(Math.min(50,Math.max(0,t))),min:0,max:50,step:.1,suffix:"%"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Durée de remboursement"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",value:g,min:1,step:1,onChange:t=>{const s=t.target.value;u(s);const x=parseInt(s,10);!isNaN(x)&&x>0&&m(x)},onBlur:()=>{const t=parseInt(g,10);isNaN(t)||t<=0||g.trim()===""?(u("1"),m(1)):(u(String(t)),m(t))},className:"flex-1 min-w-0 px-3 py-2.5 text-sm border rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-[#00A651]/30 focus:border-[#00A651]",style:{borderColor:"rgba(0,0,0,0.12)"}}),e.jsx("div",{className:"flex shrink-0 gap-1 p-1 bg-white border rounded-xl",style:{borderColor:"rgba(0,0,0,0.12)"},children:["mois","années"].map(t=>e.jsx("button",{type:"button",onClick:()=>v(t),className:`px-3 py-1.5 text-xs rounded-lg transition-all whitespace-nowrap ${b===t?"bg-[#0D1B35] text-white":"text-gray-500 hover:bg-gray-100"}`,children:t},t))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border p-4 space-y-2",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-wider",children:"Décomposition du remboursement"}),e.jsx("div",{className:"w-full h-3 rounded-full overflow-hidden bg-gray-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,a/(j||1)*100)}%`,background:"#0D1B35"}})}),e.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm inline-block",style:{background:"#0D1B35"}}),"Capital ",a>0?(a/j*100).toFixed(0):0,"%"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm inline-block bg-red-400"}),"Intérêts ",a>0?(100-a/j*100).toFixed(0):0,"%"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[e.jsx(M,{label:"Mensualité",value:h(Math.round(p))+" FCFA",sub:"par mois",highlight:!0}),e.jsx(M,{label:"Intérêts totaux",value:h(Math.round(S))+" FCFA",sub:`${F.toFixed(1)}% du capital`,warn:A}),e.jsx(M,{label:"Coût total du crédit",value:h(Math.round(j))+" FCFA",sub:`sur ${i} mois`})]}),e.jsxs("div",{className:"bg-white rounded-2xl border p-5",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Capital remboursé vs Solde restant dû"}),e.jsx(R,{width:"100%",height:200,children:e.jsxs(E,{data:D,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gCapL",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#00A651",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#00A651",stopOpacity:.02})]}),e.jsxs("linearGradient",{id:"gSolde",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0D1B35",stopOpacity:.15}),e.jsx("stop",{offset:"95%",stopColor:"#0D1B35",stopOpacity:.02})]})]}),e.jsx(T,{strokeDasharray:"3 3",stroke:"#f5f5f5"}),e.jsx(L,{dataKey:"label",tick:{fontSize:10,fill:"#9CA3AF"}}),e.jsx(O,{tick:{fontSize:10,fill:"#9CA3AF"},tickFormatter:t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:`${(t/1e3).toFixed(0)}k`}),e.jsx(K,{contentStyle:{borderRadius:12,fontSize:12},formatter:(t,s)=>[h(t)+" FCFA",s]}),e.jsx(G,{iconType:"circle",iconSize:8,wrapperStyle:{fontSize:11}}),e.jsx(k,{type:"monotone",dataKey:"Capital",name:"Capital remboursé",stroke:"#00A651",strokeWidth:2,fill:"url(#gCapL)"}),e.jsx(k,{type:"monotone",dataKey:"Solde",name:"Solde restant dû",stroke:"#0D1B35",strokeWidth:1.5,fill:"url(#gSolde)"})]})})]}),e.jsxs("details",{className:"bg-gray-50 rounded-2xl border",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("summary",{className:"px-5 py-3.5 cursor-pointer text-sm text-gray-600 select-none",children:"Tableau d'amortissement mensuel"}),e.jsx("div",{className:"px-5 pb-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs text-gray-600 min-w-[420px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx("th",{className:"text-left py-2",children:"Mois"}),e.jsx("th",{className:"text-right py-2",children:"Mensualité"}),e.jsx("th",{className:"text-right py-2",children:"Capital"}),e.jsx("th",{className:"text-right py-2",children:"Intérêts"}),e.jsx("th",{className:"text-right py-2",children:"Solde restant"})]})}),e.jsx("tbody",{children:B.map((t,s)=>t===null?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-2 text-gray-300",children:"⋯"})},`sep-${s}`):e.jsxs("tr",{className:"border-b last:border-0",style:{borderColor:"rgba(0,0,0,0.05)"},children:[e.jsxs("td",{className:"py-2 font-medium text-[#0D1B35]",children:["Mois ",t.month]}),e.jsxs("td",{className:"text-right py-2",children:[h(t.monthly)," FCFA"]}),e.jsxs("td",{className:"text-right py-2 text-[#0D1B35]",children:[h(t.principal)," FCFA"]}),e.jsxs("td",{className:"text-right py-2 text-red-500",children:[h(t.interest)," FCFA"]}),e.jsxs("td",{className:"text-right py-2 font-semibold",children:[h(t.balance)," FCFA"]})]},t.month))})]})})]})]})]})]})}export{q as default};
