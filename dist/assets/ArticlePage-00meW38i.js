import{i as W,r as n,j as e,L as o}from"./react-vendor-DTmObZUI.js";import{c as D,d as M,e as O,f as w,A as C}from"./index-D8ttx7vK.js";import{A}from"./ArticleCard-B_PTFJaN.js";import{S as k,M as _}from"./SubscriptionCTA-BQ6LE6z7.js";import{N as q}from"./NewsletterSignup-BFE9Et8K.js";import{j as S,n as B,i as V,E as G,o as z,p as H,q as J,r as K,c as Q,s as X,t as Y,u as Z,v as ee,w as se,a as te}from"./icons-CXA2BseQ.js";import"./services-DiamWyM_.js";import"./supabase-DbU1kcpI.js";import"./posthog-CUIX6uvQ.js";function ge(){const{slug:f}=W(),t=f?D(f):void 0,[d,R]=n.useState(!1),[m,v]=n.useState(""),[x,P]=n.useState(M),[h,F]=n.useState(new Set),[g,c]=n.useState(!1);if(n.useEffect(()=>(t&&(document.title=`${t.title} — NFI REPORT`),()=>{document.title="NFI REPORT - La référence financière et économique au Niger"}),[t]),!t)return e.jsx("div",{className:"min-h-screen bg-[#F7F8FA] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-gray-900 text-2xl mb-2",children:"Article introuvable"}),e.jsx(o,{to:"/",className:"text-[#00A651] hover:underline",children:"← Retour à l'accueil"})]})});const N=O(t),T=t.isPremium,E=t.content.split(`

`).slice(0,2).join(`

`),L=s=>{s.preventDefault(),m.trim()&&(P([{id:`c${Date.now()}`,author:"Vous",avatar:"https://images.unsplash.com/photo-1731093714827-ba0353e09bfb?w=50&h=50&fit=crop&crop=face",content:m,date:new Date().toISOString(),likes:0},...x]),v(""))},$=s=>{F(a=>{const r=new Set(a);return r.has(s)?r.delete(s):r.add(s),r})},y=s=>s.split(`

`).map((a,r)=>{if(a.startsWith("**")&&a.endsWith("**"))return e.jsx("h3",{className:"text-gray-900 font-bold mt-6 mb-2",children:a.slice(2,-2)},r);if(a.includes("**"))return e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:a.split(/(\*\*.*?\*\*)/).map((i,l)=>i.startsWith("**")&&i.endsWith("**")?e.jsx("strong",{children:i.slice(2,-2)},l):i)},r);if(a.startsWith("- ")){const i=a.split(`
`).filter(l=>l.startsWith("- "));return e.jsx("ul",{className:"list-disc list-inside space-y-1 mb-4 text-gray-700",children:i.map((l,b)=>e.jsx("li",{children:l.slice(2)},b))},r)}if(/^\d+\./.test(a)){const i=a.split(`
`).filter(l=>/^\d+\./.test(l));return e.jsx("ol",{className:"list-decimal list-inside space-y-1 mb-4 text-gray-700",children:i.map((l,b)=>e.jsx("li",{children:l.replace(/^\d+\.\s*/,"")},b))},r)}return e.jsx("p",{className:"text-gray-700 leading-relaxed mb-4",children:a},r)}),p=`https://www.nfireport.com/#/article/${t.slug}`,u=encodeURIComponent(p),I=encodeURIComponent(t.title),j={twitter:`https://twitter.com/intent/tweet?url=${u}&text=${I}&via=nfireport`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${u}`,facebook:`https://www.facebook.com/sharer/sharer.php?u=${u}`},U=async()=>{try{await navigator.clipboard.writeText(p),c(!0),setTimeout(()=>c(!1),2e3)}catch{const s=document.createElement("input");s.value=p,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),c(!0),setTimeout(()=>c(!1),2e3)}};return e.jsx("div",{className:"min-h-screen bg-[#F7F8FA]",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-5",children:[e.jsx(o,{to:"/",className:"hover:text-[#00A651] transition-colors",children:"Accueil"}),e.jsx(S,{size:14}),e.jsx(o,{to:`/section/${t.categorySlug}`,className:"hover:text-[#00A651] transition-colors",children:t.category}),e.jsx(S,{size:14}),e.jsxs("span",{className:"text-gray-900 truncate max-w-[200px]",children:[t.title.slice(0,40),"..."]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsxs("article",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-xl border overflow-hidden mb-5",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:t.cover,alt:t.title,className:"w-full h-56 sm:h-80 object-cover",loading:"eager"}),e.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[e.jsx(o,{to:`/section/${t.categorySlug}`,className:"px-3 py-1.5 text-xs font-semibold text-white rounded-full",style:{background:"#C9A84C"},children:t.category}),t.isPremium&&e.jsxs("span",{className:"flex items-center gap-1 px-3 py-1.5 text-xs font-semibold text-white rounded-full",style:{background:"#D4A017"},children:[e.jsx(B,{size:10})," Premium"]})]})]}),e.jsxs("div",{className:"p-5 sm:p-8",children:[e.jsx("h1",{className:"text-gray-900 text-xl sm:text-2xl lg:text-3xl leading-snug mb-4",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-5 pb-5 border-b",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:t.author.avatar,alt:t.author.name,className:"w-9 h-9 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900 font-medium",children:t.author.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.author.role})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 flex-wrap",children:[e.jsx("span",{children:w(t.publishedAt)}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(V,{size:11})," ",t.readTime," min"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(G,{size:11})," ",t.views.toLocaleString("fr-FR")," vues"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(z,{size:11})," ",t.comments]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[e.jsx("a",{href:j.twitter,target:"_blank",rel:"noopener noreferrer","aria-label":"Partager sur Twitter",className:"p-1.5 rounded-full hover:bg-gray-100 transition text-gray-500 hover:text-[#1DA1F2]",children:e.jsx(H,{size:15})}),e.jsx("a",{href:j.linkedin,target:"_blank",rel:"noopener noreferrer","aria-label":"Partager sur LinkedIn",className:"p-1.5 rounded-full hover:bg-gray-100 transition text-gray-500 hover:text-[#0A66C2]",children:e.jsx(J,{size:15})}),e.jsx("a",{href:j.facebook,target:"_blank",rel:"noopener noreferrer","aria-label":"Partager sur Facebook",className:"p-1.5 rounded-full hover:bg-gray-100 transition text-gray-500 hover:text-[#1877F2]",children:e.jsx(K,{size:15})}),e.jsx("button",{onClick:U,"aria-label":"Copier le lien",title:g?"Lien copié !":"Copier le lien",className:`p-1.5 rounded-full hover:bg-gray-100 transition ${g?"text-[#00A651]":"text-gray-500 hover:text-[#C9A84C]"}`,children:g?e.jsx(Q,{size:15}):e.jsx(X,{size:15})}),e.jsx("button",{onClick:()=>R(!d),className:"p-1.5 rounded-full hover:bg-gray-100 transition text-gray-500","aria-label":d?"Retirer des favoris":"Sauvegarder",children:d?e.jsx(Y,{size:15,className:"text-[#00A651]"}):e.jsx(Z,{size:15,className:"text-gray-500 hover:text-[#C9A84C]"})})]})]}),e.jsx("p",{className:"text-gray-600 text-sm sm:text-base italic leading-relaxed mb-6 border-l-4 pl-4",style:{borderColor:"#C9A84C",fontFamily:"var(--font-serif)"},children:t.excerpt}),e.jsx("div",{className:"prose-article text-sm sm:text-base",children:T?e.jsxs(e.Fragment,{children:[y(E),e.jsxs("div",{className:"relative mt-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-white via-white/90 to-transparent z-10",style:{top:"-80px"}}),e.jsx("div",{className:"relative z-20 mt-8",children:e.jsx(k,{variant:"inline"})})]})]}):y(t.content)}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-8 pt-5 border-t",style:{borderColor:"rgba(0,0,0,0.08)"},children:t.tags.map(s=>e.jsxs(o,{to:`/search?q=${encodeURIComponent(s)}`,className:"px-3 py-1 text-xs text-[#00A651] border border-[#00A651]/30 rounded-full hover:bg-[#00A651] hover:text-white transition-colors",children:["#",s]},s))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border p-5 sm:p-6 mb-5",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx("h3",{className:"text-gray-900 font-semibold mb-4 text-sm uppercase tracking-wider",children:"À propos de l'auteur"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:t.author.avatar,alt:t.author.name,className:"w-16 h-16 rounded-full object-cover shrink-0",loading:"lazy"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-gray-900 font-semibold",children:t.author.name}),e.jsx("p",{className:"text-[#00A651] text-xs mb-2",children:t.author.role}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.author.bio}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:[t.author.articles," articles publiés"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border p-5 sm:p-6",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsxs("h3",{className:"text-gray-900 font-semibold mb-5 flex items-center gap-2",children:[e.jsx(z,{size:16,className:"text-[#00A651]"}),"Commentaires (",x.length,")"]}),e.jsxs("form",{onSubmit:L,className:"mb-6",children:[e.jsx("textarea",{value:m,onChange:s=>v(s.target.value),placeholder:"Partagez votre analyse ou votre point de vue...",rows:3,className:"w-full px-4 py-3 text-sm border rounded-xl focus:outline-none focus:ring-2 focus:ring-[#00A651]/30 focus:border-[#00A651] resize-none",style:{borderColor:"rgba(0,0,0,0.15)"}}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-5 py-2 text-sm text-white font-medium rounded-full transition hover:opacity-90",style:{background:"#C9A84C"},children:[e.jsx(ee,{size:13})," Publier"]})})]}),e.jsx("div",{className:"space-y-5",children:x.map(s=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:s.avatar,alt:s.author,className:"w-9 h-9 rounded-full object-cover shrink-0",loading:"lazy"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.author}),e.jsx("span",{className:"text-xs text-gray-400",children:w(s.date)})]}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:s.content}),e.jsxs("button",{onClick:()=>$(s.id),className:`flex items-center gap-1.5 mt-2 text-xs transition-colors ${h.has(s.id)?"text-[#00A651]":"text-gray-400 hover:text-gray-600"}`,style:h.has(s.id)?{color:"#C9A84C"}:{},children:[e.jsx(se,{size:12}),s.likes+(h.has(s.id)?1:0)]})]})]},s.id))})]})]}),e.jsxs("aside",{className:"space-y-5",children:[e.jsx(_,{}),e.jsxs("div",{className:"bg-white rounded-xl border p-5",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsxs("h3",{className:"text-gray-900 font-semibold text-sm mb-4 flex items-center gap-2",children:[e.jsx(te,{size:14,className:"text-[#00A651]"})," Articles similaires"]}),e.jsx("div",{className:"space-y-4",children:(N.length>0?N:C.filter(s=>s.id!==t.id).slice(0,4)).map(s=>e.jsx(A,{article:s,variant:"compact"},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border p-5",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx("h3",{className:"text-gray-900 font-semibold text-sm mb-3",children:"Tags de l'article"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.tags.map(s=>e.jsxs(o,{to:`/search?q=${encodeURIComponent(s)}`,className:"px-2.5 py-1 text-xs text-gray-600 bg-gray-100 rounded-full hover:bg-[#00A651] hover:text-white transition-colors",children:["#",s]},s))})]}),e.jsx(q,{variant:"compact"}),!t.isPremium&&e.jsx(k,{variant:"sidebar"})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[e.jsx("div",{className:"w-1 h-5 rounded-full bg-[#00A651]"}),e.jsxs("h2",{className:"text-gray-900 font-bold text-lg",children:["Autres articles dans ",t.category]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:C.filter(s=>s.id!==t.id).slice(0,4).map(s=>e.jsx(A,{article:s,variant:"grid"},s.id))})]})]})})}export{ge as default};
