import{r as f,j as e}from"./react-vendor-DTmObZUI.js";import{a as $,I as E,T as O,aa as R}from"./icons-CXA2BseQ.js";import{R as S,A as w,C as D,X as M,Y as z,T,c as B,f as v}from"./charts-CxNNR8U_.js";const K={mensuelle:12,trimestrielle:4,annuelle:1};function V(s,i,n,l,x=0){const g=K[l],p=i/100/g,h=[];for(let o=0;o<=n;o++){const a=o*g,u=s*Math.pow(1+p,a),d=x>0&&p>0?x*(Math.pow(1+p,a)-1)/p:x*a,c=u+d,y=c-s-x*a;h.push({year:o,capital:Math.round(s+x*a),interets:Math.round(Math.max(0,y)),total:Math.round(c)})}return h}const b=s=>new Intl.NumberFormat("fr-FR",{maximumFractionDigits:0}).format(s),A=["#00A651","#0D1B35","#E53E3E"],F={id:"1",label:"Scénario 1",principal:1e6,rate:8,years:10,freq:"annuelle",monthly:0},q=({active:s,payload:i,label:n})=>s&&(i!=null&&i.length)?e.jsxs("div",{className:"bg-white border rounded-xl shadow-lg px-4 py-3 text-sm min-w-[180px]",style:{borderColor:"rgba(0,0,0,0.1)"},children:[e.jsxs("p",{className:"text-gray-400 text-xs mb-2",children:["Année ",n]}),i.map(l=>e.jsxs("div",{className:"flex justify-between gap-4",children:[e.jsx("span",{style:{color:l.stroke||l.fill,fontSize:12},children:l.name}),e.jsxs("span",{className:"font-semibold text-gray-800",style:{fontSize:12},children:[b(l.value)," FCFA"]})]},l.name))]}):null;function N({label:s,type:i,value:n,onChange:l,min:x,max:g,step:p}){const[h,o]=f.useState(String(n));f.useEffect(()=>{o(String(n))},[n]);const a=d=>{const c=d.target.value;if(o(c),i==="text")l(c);else{const y=parseFloat(c);isNaN(y)||l(c)}},u=()=>{if(i==="number"){const d=parseFloat(h);if(isNaN(d)||h.trim()===""){const c=String(x??0);o(c),l(c)}}};return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1.5",children:s}),e.jsx("input",{type:i,value:h,onChange:a,onBlur:u,min:x,max:g,step:p,className:"w-full px-3 py-2.5 text-sm border rounded-xl bg-white focus:outline-none focus:ring-2 focus:ring-[#00A651]/30 focus:border-[#00A651]",style:{borderColor:"rgba(0,0,0,0.12)"}})]})}function k({label:s,value:i,color:n,highlight:l=!1}){return e.jsxs("div",{className:`rounded-2xl p-3.5 border ${l?"shadow-md":""}`,style:{borderColor:l?n+"44":"rgba(0,0,0,0.06)",background:l?n+"08":"white"},children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1 leading-tight",children:s}),e.jsx("p",{className:"font-bold text-sm leading-tight",style:{color:n},children:i})]})}function Y(){const[s,i]=f.useState([F]),[n,l]=f.useState("1"),[x,g]=f.useState(!1),p=()=>{if(s.length>=3)return;const t=Date.now().toString(),r=s.length+1;i(m=>[...m,{...F,id:t,label:`Scénario ${r}`,rate:F.rate+r*2}]),l(t),g(!0)},h=t=>{if(s.length===1)return;const r=s.filter(m=>m.id!==t);i(r),l(r[0].id),r.length===1&&g(!1)},o=(t,r,m)=>{i(j=>j.map(C=>C.id===t?{...C,[r]:m}:C))},a=s.find(t=>t.id===n)??s[0],u=f.useMemo(()=>s.map(t=>({...t,series:V(t.principal,t.rate,t.years,t.freq,t.monthly)})),[s]),d=u.find(t=>t.id===n)??u[0],c=d.series[d.series.length-1],y=Math.max(...s.map(t=>t.years)),I=f.useMemo(()=>Array.from({length:y+1},(t,r)=>{const m={year:r};return u.forEach(j=>{var C;m[j.label]=((C=j.series[r])==null?void 0:C.total)??j.series[j.series.length-1].total}),m}),[u,y]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-[#00A651]/10 flex items-center justify-center",children:e.jsx($,{size:20,className:"text-[#00A651]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[#0D1B35]",style:{fontSize:"1.4rem"},children:"Calculatrice d'Intérêt Composé"}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Visualisez la croissance de vos investissements dans le temps"})]})]}),e.jsxs("div",{className:"flex items-start gap-2 bg-blue-50 border border-blue-200 rounded-xl px-4 py-3",children:[e.jsx(E,{size:15,className:"text-blue-500 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-xs text-blue-800",children:"La puissance des intérêts composés : vos intérêts génèrent eux-mêmes des intérêts. Plus la durée est longue, plus l'effet est spectaculaire."})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.map((t,r)=>e.jsxs("button",{onClick:()=>l(t.id),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm border transition-all ${n===t.id?"text-white border-transparent":"bg-white text-gray-600 border-gray-200 hover:border-[#00A651] hover:text-[#00A651]"}`,style:n===t.id?{background:A[r%3]}:{},children:[t.label,s.length>1&&n===t.id&&e.jsx("span",{onClick:m=>{m.stopPropagation(),h(t.id)},className:"cursor-pointer opacity-70 hover:opacity-100",children:e.jsx(O,{size:11})})]},t.id)),s.length<3&&e.jsxs("button",{onClick:p,className:"flex items-center gap-1.5 px-3 py-2 rounded-full text-sm border border-dashed border-gray-300 text-gray-500 hover:border-[#00A651] hover:text-[#00A651] transition-all",children:[e.jsx(R,{size:14})," Comparer"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-5 gap-5",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4 bg-gray-50 rounded-2xl p-5 border",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx(N,{label:"Nom du scénario",type:"text",value:a.label,onChange:t=>o(a.id,"label",t)}),e.jsx(N,{label:"Capital initial (FCFA)",type:"number",value:a.principal,onChange:t=>o(a.id,"principal",Math.max(0,Number(t))),min:0,step:1e5}),e.jsx(N,{label:"Taux d'intérêt annuel (%)",type:"number",value:a.rate,onChange:t=>o(a.id,"rate",Math.min(50,Math.max(.1,Number(t)))),min:.1,max:50,step:.1}),e.jsx(N,{label:"Durée (années)",type:"number",value:a.years,onChange:t=>o(a.id,"years",Math.min(50,Math.max(1,Math.round(Number(t))))),min:1,max:50}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1.5",children:"Fréquence de capitalisation"}),e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:["mensuelle","trimestrielle","annuelle"].map(t=>e.jsx("button",{onClick:()=>o(a.id,"freq",t),className:`flex-1 py-2 text-xs rounded-xl border transition-all ${a.freq===t?"bg-[#0D1B35] text-white border-[#0D1B35]":"bg-white text-gray-600 border-gray-200 hover:border-gray-400"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsx(N,{label:"Versement mensuel optionnel (FCFA)",type:"number",value:a.monthly,onChange:t=>o(a.id,"monthly",Math.max(0,Number(t))),min:0,step:5e3})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsx(k,{label:"Capital + versements",value:b(c.capital)+" FCFA",color:"#0D1B35"}),e.jsx(k,{label:"Intérêts générés",value:b(c.interets)+" FCFA",color:"#00A651"}),e.jsx(k,{label:"Total final",value:b(c.total)+" FCFA",color:"#00A651",highlight:!0})]}),a.principal>0&&e.jsxs("div",{className:"text-center bg-gradient-to-r from-[#00A651]/5 to-[#0D1B35]/5 rounded-2xl py-4 border",style:{borderColor:"rgba(0,166,81,0.15)"},children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Votre investissement sera multiplié par"}),e.jsxs("p",{className:"font-black",style:{fontSize:"2.5rem",color:"#00A651",lineHeight:1},children:["×",(c.total/a.principal).toFixed(1)]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["en ",a.years," ans à ",a.rate," % / an"]})]}),!x&&e.jsxs("div",{className:"bg-white rounded-2xl border p-5",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["Évolution sur ",a.years," ans"]}),e.jsx(S,{width:"100%",height:220,children:e.jsxs(w,{data:d.series,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gCapital",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#0D1B35",stopOpacity:.15}),e.jsx("stop",{offset:"95%",stopColor:"#0D1B35",stopOpacity:.01})]}),e.jsxs("linearGradient",{id:"gInterets",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#00A651",stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:"#00A651",stopOpacity:.01})]})]}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#f5f5f5"}),e.jsx(M,{dataKey:"year",tick:{fontSize:10,fill:"#9CA3AF"},tickFormatter:t=>`An ${t}`}),e.jsx(z,{tick:{fontSize:10,fill:"#9CA3AF"},tickFormatter:t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:`${(t/1e3).toFixed(0)}k`}),e.jsx(T,{content:e.jsx(q,{})}),e.jsx(B,{iconType:"circle",iconSize:8,wrapperStyle:{fontSize:11}}),e.jsx(v,{type:"monotone",dataKey:"capital",name:"Capital + versements",stroke:"#0D1B35",strokeWidth:1.5,fill:"url(#gCapital)"}),e.jsx(v,{type:"monotone",dataKey:"total",name:"Total avec intérêts",stroke:"#00A651",strokeWidth:2,fill:"url(#gInterets)"})]})})]}),x&&s.length>1&&e.jsxs("div",{className:"bg-white rounded-2xl border p-5",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Comparaison des scénarios (Total final)"}),e.jsx(S,{width:"100%",height:220,children:e.jsxs(w,{data:I,children:[e.jsx("defs",{children:s.map((t,r)=>e.jsxs("linearGradient",{id:`gc${r}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:A[r],stopOpacity:.15}),e.jsx("stop",{offset:"95%",stopColor:A[r],stopOpacity:.01})]},t.id))}),e.jsx(D,{strokeDasharray:"3 3",stroke:"#f5f5f5"}),e.jsx(M,{dataKey:"year",tick:{fontSize:10,fill:"#9CA3AF"},tickFormatter:t=>`An ${t}`}),e.jsx(z,{tick:{fontSize:10,fill:"#9CA3AF"},tickFormatter:t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:`${(t/1e3).toFixed(0)}k`}),e.jsx(T,{contentStyle:{borderRadius:12,fontSize:12},formatter:t=>[b(t)+" FCFA"]}),e.jsx(B,{iconType:"circle",iconSize:8,wrapperStyle:{fontSize:11}}),s.map((t,r)=>e.jsx(v,{type:"monotone",dataKey:t.label,stroke:A[r],strokeWidth:2,fill:`url(#gc${r})`},t.id))]})})]}),e.jsxs("details",{className:"bg-gray-50 rounded-2xl border",style:{borderColor:"rgba(0,0,0,0.06)"},children:[e.jsx("summary",{className:"px-5 py-3.5 cursor-pointer text-sm text-gray-600 select-none",children:"Tableau de croissance annuel détaillé"}),e.jsx("div",{className:"px-5 pb-4 overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs text-gray-600 min-w-[400px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx("th",{className:"text-left py-2",children:"Année"}),e.jsx("th",{className:"text-right py-2",children:"Capital versé"}),e.jsx("th",{className:"text-right py-2",children:"Intérêts cumulés"}),e.jsx("th",{className:"text-right py-2",children:"Total"})]})}),e.jsx("tbody",{children:d.series.filter((t,r)=>r%(d.series.length>20?5:1)===0||r===d.series.length-1).map(t=>e.jsxs("tr",{className:"border-b last:border-0",style:{borderColor:"rgba(0,0,0,0.05)"},children:[e.jsxs("td",{className:"py-2 font-medium text-[#0D1B35]",children:["Année ",t.year]}),e.jsxs("td",{className:"text-right py-2",children:[b(t.capital)," FCFA"]}),e.jsxs("td",{className:"text-right py-2 text-[#00A651]",children:["+",b(t.interets)," FCFA"]}),e.jsxs("td",{className:"text-right py-2 font-semibold text-[#0D1B35]",children:[b(t.total)," FCFA"]})]},t.year))})]})})]})]})]})]})}export{Y as default};
