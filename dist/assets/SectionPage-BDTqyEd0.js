import{i as S,r as l,j as e,L as c}from"./react-vendor-DTmObZUI.js";import{a as j,b as T,A as u,f as k,T as E}from"./index-D8ttx7vK.js";import{A as v}from"./ArticleCard-B_PTFJaN.js";import{M,S as P}from"./SubscriptionCTA-BQ6LE6z7.js";import{N as R}from"./NewsletterSignup-BFE9Et8K.js";import{j as F,k as z,l as L,L as I,m as $,a as G}from"./icons-CXA2BseQ.js";import"./services-DiamWyM_.js";import"./supabase-DbU1kcpI.js";import"./posthog-CUIX6uvQ.js";const f=6;function Q(){const{slug:i}=S(),[n,g]=l.useState("grid"),[d,y]=l.useState("recent"),[o,N]=l.useState("all"),[h,m]=l.useState(1),p=l.useRef(!1);l.useEffect(()=>{if(!p.current){p.current=!0;return}const s=document.getElementById("articles-list");s&&s.scrollIntoView({behavior:"smooth",block:"start"})},[o,d]);const a=j.find(s=>s.slug===i),b=i?T(i):u;let t=(b.length>=3?b:u).filter(s=>o==="free"?!s.isPremium:o==="premium"?s.isPremium:!0);t=[...t].sort((s,r)=>d==="popular"?r.views-s.views:d==="readtime"?s.readTime-r.readTime:new Date(r.publishedAt).getTime()-new Date(s.publishedAt).getTime());const A=Math.ceil(t.length/f),x=t.slice(0,h*f),w=h<A,C=l.useMemo(()=>[...u].sort((s,r)=>r.views-s.views).slice(0,4),[]);return!a&&i?e.jsx("div",{className:"min-h-screen bg-[#F7F8FA] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-gray-900 text-2xl mb-2",children:"Section introuvable"}),e.jsx(c,{to:"/",className:"text-[#00A651] hover:underline",children:"← Retour à l'accueil"})]})}):e.jsxs("div",{className:"min-h-screen bg-[#F7F8FA]",children:[e.jsx("div",{className:"bg-white border-b",style:{borderColor:"rgba(0,0,0,0.08)"},children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-500 mb-4",children:[e.jsx(c,{to:"/",className:"hover:text-[#00A651] transition-colors",children:"Accueil"}),e.jsx(F,{size:14}),e.jsx("span",{className:"text-gray-900 font-medium",children:(a==null?void 0:a.name)??"Toutes les actualités"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-gray-900 text-2xl sm:text-3xl",children:(a==null?void 0:a.name)??"Toutes les actualités"}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:[t.length," article",t.length!==1?"s":""," · Mis à jour aujourd'hui"]})]})}),e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-none mt-5",children:j.map(s=>e.jsx(c,{to:`/section/${s.slug}`,className:`flex items-center gap-1.5 px-4 py-2 text-sm rounded-full shrink-0 transition-all font-medium ${s.slug===i?"text-white shadow":"text-gray-600 bg-gray-100 hover:bg-gray-200"}`,style:s.slug===i?{background:"#00A651"}:{},children:s.name},s.slug))})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6 sm:py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{id:"articles-list",className:"flex items-center gap-2 mb-5 flex-wrap",children:[e.jsx("div",{className:"flex gap-1 p-1 bg-white rounded-lg border",style:{borderColor:"rgba(0,0,0,0.08)"},children:["all","free","premium"].map(s=>e.jsx("button",{onClick:()=>{N(s),m(1)},className:`px-3 py-1.5 text-xs rounded-md transition-all font-medium ${o===s?"text-white":"text-gray-600 hover:bg-gray-50"}`,style:o===s?{background:"#00A651"}:{},children:s==="all"?"Tous":s==="free"?"Gratuits":"Premium"},s))}),e.jsxs("div",{className:"flex items-center gap-1.5 ml-auto",children:[e.jsx(z,{size:14,className:"text-gray-400"}),e.jsxs("select",{value:d,onChange:s=>{y(s.target.value),m(1)},className:"text-xs border rounded-lg px-2 py-1.5 bg-white focus:outline-none focus:border-[#00A651]",style:{borderColor:"rgba(0,0,0,0.15)"},children:[e.jsx("option",{value:"recent",children:"Plus récents"}),e.jsx("option",{value:"popular",children:"Plus populaires"}),e.jsx("option",{value:"readtime",children:"Lecture rapide"})]})]}),e.jsxs("div",{className:"flex gap-1 p-1 bg-white rounded-lg border",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx("button",{onClick:()=>g("grid"),className:`p-1.5 rounded transition ${n==="grid"?"text-white":"text-gray-500 hover:text-gray-700"}`,style:n==="grid"?{background:"#00A651"}:{},children:e.jsx(L,{size:14})}),e.jsx("button",{onClick:()=>g("list"),className:`p-1.5 rounded transition ${n==="list"?"text-white":"text-gray-500 hover:text-gray-700"}`,style:n==="list"?{background:"#00A651"}:{},children:e.jsx(I,{size:14})})]})]}),x.length===0?e.jsxs("div",{className:"bg-white rounded-xl border p-10 text-center",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx($,{size:32,className:"text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Aucun article trouvé avec ces filtres."})]}):n==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:x.map(s=>e.jsx(v,{article:s,variant:"grid"},s.id))}):e.jsx("div",{className:"space-y-3",children:x.map(s=>e.jsx(v,{article:s,variant:"horizontal",showExcerpt:!0},s.id))}),w&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>m(s=>s+1),className:"px-8 py-2.5 text-sm font-medium border-2 border-[#00A651] text-[#00A651] rounded-full hover:bg-[#00A651] hover:text-white transition-all",children:"Charger plus d'articles"})}),e.jsxs("div",{className:"mt-4 text-center text-xs text-gray-400",children:["Affichage ",Math.min(x.length,t.length)," / ",t.length," articles"]})]}),e.jsxs("aside",{className:"space-y-5",children:[e.jsx(M,{}),e.jsxs("div",{className:"bg-white rounded-xl border p-5",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsxs("h3",{className:"text-gray-900 font-semibold text-sm mb-4 flex items-center gap-2",children:[e.jsx(G,{size:14,className:"text-red-500"})," Les plus lus"]}),e.jsx("div",{className:"space-y-4",children:C.map((s,r)=>e.jsxs("div",{className:"flex items-start gap-3 group",children:[e.jsx("span",{className:"text-xl font-black shrink-0",style:{color:r===0?"#D4A017":"#e5e7eb"},children:String(r+1).padStart(2,"0")}),e.jsxs("div",{children:[e.jsx(c,{to:`/article/${s.slug}`,children:e.jsx("p",{className:"text-xs text-gray-900 line-clamp-2 group-hover:text-[#00A651] transition-colors leading-snug",children:s.title})}),e.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:[s.views.toLocaleString("fr-FR")," vues · ",k(s.publishedAt)]})]})]},s.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border p-5",style:{borderColor:"rgba(0,0,0,0.08)"},children:[e.jsx("h3",{className:"text-gray-900 font-semibold text-sm mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.slice(0,12).map(s=>e.jsxs(c,{to:`/search?q=${encodeURIComponent(s)}`,className:"px-2.5 py-1 text-xs text-gray-600 bg-gray-100 rounded-full hover:bg-[#00A651] hover:text-white transition-colors",children:["#",s]},s))})]}),e.jsx(R,{variant:"compact"}),e.jsx(P,{variant:"sidebar"})]})]})})]})}export{Q as default};
