import{r as n,j as e}from"./react-vendor-DTmObZUI.js";import{s as j}from"./supabase-DbU1kcpI.js";import{analytics as b}from"./posthog-CUIX6uvQ.js";import{h as m,y as x,O as d,Q as u}from"./icons-CXA2BseQ.js";async function y(l){{console.info(`[Resend] Email de bienvenue non envoyé — configurez VITE_EDGE_EMAIL_URL dans .env
  Voir les instructions dans /src/lib/email.ts`);return}}function A({variant:l="default"}){const[t,i]=n.useState(""),[s,p]=n.useState(!1),[c,f]=n.useState(!1),[a,h]=n.useState(null),o=async r=>{if(r.preventDefault(),!(!t||s)){p(!0),h(null);try{await j(t)?(y(t).catch(()=>{}),b.newsletterSignup(t).catch(()=>{}),f(!0),i("")):(b.newsletterSignup(t).catch(()=>{}),f(!0),i(""))}catch(g){console.error("[Newsletter] Erreur inscription :",g),h("Une erreur est survenue. Veuillez réessayer.")}finally{p(!1)}}};return l==="compact"?e.jsxs("div",{className:"bg-[#0D1B35] rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(m,{size:16,className:"text-[#00A651]"}),e.jsx("h4",{className:"text-white text-sm font-semibold",children:"Newsletter quotidienne"})]}),e.jsx("p",{className:"text-gray-400 text-xs mb-3 leading-relaxed",children:"Les analyses financières africaines directement dans votre boîte mail."}),c?e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm",children:[e.jsx(x,{size:16})," Inscription réussie !"]}):e.jsxs("form",{onSubmit:o,className:"space-y-2",children:[e.jsx("input",{type:"email",value:t,onChange:r=>i(r.target.value),placeholder:"votre@email.com",required:!0,className:"w-full px-3 py-2 text-sm bg-white/10 border border-white/10 rounded-lg text-white placeholder:text-gray-500 focus:outline-none focus:border-[#00A651]"}),a&&e.jsxs("p",{className:"flex items-center gap-1 text-red-400 text-xs",children:[e.jsx(d,{size:12})," ",a]}),e.jsxs("button",{type:"submit",disabled:s,className:"w-full py-2 text-sm text-white font-medium rounded-lg transition flex items-center justify-center gap-2 disabled:opacity-60",style:{background:"#00A651"},children:[s?e.jsx(u,{size:14,className:"animate-spin"}):null,s?"Inscription...":"S'inscrire gratuitement"]})]})]}):l==="banner"?e.jsx("section",{className:"py-12 sm:py-16",style:{background:"linear-gradient(135deg, #0D1B35 0%, #1a3060 100%)"},children:e.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-[#00A651]/20 mb-4",children:e.jsx(m,{size:22,className:"text-[#00A651]"})}),e.jsx("h2",{className:"text-white text-2xl sm:text-3xl mb-2",children:"Ne manquez aucune analyse"}),e.jsx("p",{className:"text-gray-400 mb-8 text-sm sm:text-base",children:"Rejoignez plus de 15 000 professionnels qui reçoivent notre newsletter économique chaque matin."}),c?e.jsxs("div",{className:"flex items-center justify-center gap-3 text-green-400",children:[e.jsx(x,{size:20}),e.jsx("span",{className:"text-lg",children:"Parfait ! Vous êtes inscrit(e). Vérifiez votre email."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:o,className:"flex flex-col sm:flex-row gap-3 max-w-lg mx-auto",children:[e.jsx("input",{type:"email",value:t,onChange:r=>i(r.target.value),placeholder:"Votre adresse email",required:!0,className:"flex-1 px-5 py-3 text-sm bg-white/10 border border-white/20 rounded-full text-white placeholder:text-gray-500 focus:outline-none focus:border-[#00A651]"}),e.jsxs("button",{type:"submit",disabled:s,className:"px-6 py-3 text-sm text-white font-semibold rounded-full transition hover:opacity-90 flex items-center justify-center gap-2 disabled:opacity-60",style:{background:"#00A651"},children:[s?e.jsx(u,{size:14,className:"animate-spin"}):null,s?"...":"S'abonner"]})]}),a&&e.jsxs("p",{className:"flex items-center justify-center gap-1 text-red-400 text-xs mt-3",children:[e.jsx(d,{size:12})," ",a]})]}),e.jsx("p",{className:"text-gray-600 text-xs mt-4",children:"Gratuit · Sans spam · Désabonnement en 1 clic"})]})}):e.jsxs("section",{className:"bg-gradient-to-br from-[#00A651]/10 to-[#0D1B35]/5 rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-[#00A651]/20 mb-4",children:e.jsx(m,{size:22,className:"text-[#00A651]"})}),e.jsx("h3",{className:"text-gray-900 text-xl mb-2",children:"Restez informé"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6 max-w-sm mx-auto",children:"Analyses quotidiennes, alertes marchés et rapports exclusifs directement dans votre inbox."}),c?e.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600",children:[e.jsx(x,{size:20})," ",e.jsx("span",{children:"Inscription confirmée ! Vérifiez votre email."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:o,className:"flex flex-col sm:flex-row gap-3 max-w-md mx-auto",children:[e.jsx("input",{type:"email",value:t,onChange:r=>i(r.target.value),placeholder:"Votre adresse email",required:!0,className:"flex-1 px-4 py-2.5 text-sm border rounded-full focus:outline-none focus:ring-2 focus:ring-[#00A651]/30 focus:border-[#00A651]",style:{borderColor:"rgba(0,0,0,0.15)"}}),e.jsxs("button",{type:"submit",disabled:s,className:"px-6 py-2.5 text-sm text-white font-medium rounded-full transition hover:opacity-90 flex items-center gap-2 justify-center disabled:opacity-60",style:{background:"#00A651"},children:[s?e.jsx(u,{size:13,className:"animate-spin"}):null,s?"...":"S'inscrire"]})]}),a&&e.jsxs("p",{className:"flex items-center justify-center gap-1 text-red-500 text-xs mt-3",children:[e.jsx(d,{size:12})," ",a]})]})]})}export{A as N};
