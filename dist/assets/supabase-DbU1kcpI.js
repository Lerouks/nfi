import{c as o}from"./services-DiamWyM_.js";const n="https://iklwebbglkldowxoikkg.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlrbHdlYmJnbGtsZG93eG9pa2tnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE5NzgzMzEsImV4cCI6MjA4NzU1NDMzMX0.WzFA2K_SEFYKvTGBj8DMt_yaKvSX_HPFYgmFwaGQs9A",r=n.startsWith("https://")&&a.startsWith("eyJ"),s="__nfi_supabase_client__";function l(){if(globalThis[s])return globalThis[s];const t=o(r?n:"https://placeholder.supabase.co",r?a:"placeholder-key",{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"nfi-report-auth"}});return globalThis[s]=t,t}const i=l();async function u(t){if(!r)return null;try{const{data:e,error:c}=await t();return c?null:e}catch{return null}}async function b(t){return await u(()=>i.from("profiles").upsert({...t,subscription_tier:t.subscription_tier??"free",created_at:t.created_at??new Date().toISOString()}))!==null}async function _(t){return await u(()=>i.from("newsletters").upsert({email:t,is_active:!0,subscribed_at:new Date().toISOString()},{onConflict:"email"}))!==null}export{_ as s,b as u};
